<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="리액티브 스트림즈란? # 리액티브한 코드 작성을 위한 구성을 도와주는 리액티브 라이브러리가 있다. 이 리액티브 라이브러리를 어떻게 구현해야할지 정의해놓은 별도의 표준 사양을 리액티브 스트림즈(Reactive Streams)라고 한다.
리액티브 스트림즈는 &lsquo;데이터 스트림을 Non-Blocking이면서 비동기적인 방식으로 처리하기 위한 리액티브 라이브러리 표준 사양&rsquo;이라고 표현할 수 있다. 이를 구현한 구현체로는 RxJava, Reactor, Akka Streams, Java 9 Flow API 등이 있고, 그 중에 Spring framework와 가장 궁합이 잘 맞는 구현체는 Reactor이다.
리액티브 구성요소 # 리액티브 스트림즈를 통해 구현해야 되는 API 컴포넌트에는 Publisher, Subscriber, Subscription, Processor 가 있다.">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#343a40">
<meta name="color-scheme" content="light dark"><meta property="og:title" content="" />
<meta property="og:description" content="리액티브 스트림즈란? # 리액티브한 코드 작성을 위한 구성을 도와주는 리액티브 라이브러리가 있다. 이 리액티브 라이브러리를 어떻게 구현해야할지 정의해놓은 별도의 표준 사양을 리액티브 스트림즈(Reactive Streams)라고 한다.
리액티브 스트림즈는 &lsquo;데이터 스트림을 Non-Blocking이면서 비동기적인 방식으로 처리하기 위한 리액티브 라이브러리 표준 사양&rsquo;이라고 표현할 수 있다. 이를 구현한 구현체로는 RxJava, Reactor, Akka Streams, Java 9 Flow API 등이 있고, 그 중에 Spring framework와 가장 궁합이 잘 맞는 구현체는 Reactor이다.
리액티브 구성요소 # 리액티브 스트림즈를 통해 구현해야 되는 API 컴포넌트에는 Publisher, Subscriber, Subscription, Processor 가 있다." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://example.com/docs/reactive-streams/001_reactive_streams_component/" /><meta property="article:section" content="docs" />
<meta property="article:published_time" content="2023-06-11T00:00:00+00:00" />
<meta property="article:modified_time" content="2023-12-02T14:53:35+09:00" />

<title>001 Reactive Streams Component | TIL</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" >
<link rel="stylesheet" href="/book.min.4f0117e74e5337280f18eb9641eae520cb4b25adcf5dd64fafad4664145a5957.css" integrity="sha256-TwEX505TNygPGOuWQerlIMtLJa3PXdZPr61GZBRaWVc=" crossorigin="anonymous">
  <script defer src="/flexsearch.min.js"></script>
  <script defer src="/en.search.min.7f3df65ddc8caa8c8042fa8604332ec2ec6cb8d3c8fa9f1d5101a71af138b321.js" integrity="sha256-fz32XdyMqoyAQvqGBDMuwuxsuNPI&#43;p8dUQGnGvE4syE=" crossorigin="anonymous"></script>

  <script defer src="/sw.min.6f6f90fcb8eb1c49ec389838e6b801d0de19430b8e516902f8d75c3c8bd98739.js" integrity="sha256-b2&#43;Q/LjrHEnsOJg45rgB0N4ZQwuOUWkC&#43;NdcPIvZhzk=" crossorigin="anonymous"></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/"><span>TIL</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>












  



  
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-353f7a5578fa41dbc42c73ea30fe2255" class="toggle"  />
    <label for="section-353f7a5578fa41dbc42c73ea30fe2255" class="flex justify-between">
      <a href="/docs/algorithm/" class="">Algorithm</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-92d85911959de2466ef66b3821f607d7" class="toggle"  />
    <label for="section-92d85911959de2466ef66b3821f607d7" class="flex justify-between">
      <a href="/docs/batch/" class="">Batch</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/batch/001_performance_improved_batch/" class="">001 Performance Improved Batch</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-3fd9018456329c22500501d97c791fad" class="toggle"  />
    <label for="section-3fd9018456329c22500501d97c791fad" class="flex justify-between">
      <a href="/docs/data-structure/" class="">Data Structure</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-f63d6cf864a4b2a00c9bc1b7f8921b37" class="toggle"  />
    <label for="section-f63d6cf864a4b2a00c9bc1b7f8921b37" class="flex justify-between">
      <a href="/docs/ddd/" class="">Ddd</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-10d41b0387e5bda7e9958b9b5ece051e" class="toggle"  />
    <label for="section-10d41b0387e5bda7e9958b9b5ece051e" class="flex justify-between">
      <a href="/docs/docker/" class="">Docker</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-ba0b1465c1bad5a998860ad5f870bf7e" class="toggle"  />
    <label for="section-ba0b1465c1bad5a998860ad5f870bf7e" class="flex justify-between">
      <a href="/docs/etc/" class="">Etc</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-eca69da21de5b0cd25d8421dec09a327" class="toggle"  />
    <label for="section-eca69da21de5b0cd25d8421dec09a327" class="flex justify-between">
      <a href="/docs/java/" class="">Java</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-f3c1d22d19edbcf158d04b84a4d9d6c2" class="toggle"  />
    <label for="section-f3c1d22d19edbcf158d04b84a4d9d6c2" class="flex justify-between">
      <a href="/docs/jenkins/" class="">Jenkins</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-55218fb7ef47d61aa86fc77253026243" class="toggle"  />
    <label for="section-55218fb7ef47d61aa86fc77253026243" class="flex justify-between">
      <a href="/docs/jpa/" class="">Jpa</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-c03dced0c5b16cbce767a51b81ce1077" class="toggle"  />
    <label for="section-c03dced0c5b16cbce767a51b81ce1077" class="flex justify-between">
      <a href="/docs/kafka/" class="">Kafka</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-04d541b0249994115320e926dbc9d6c5" class="toggle"  />
    <label for="section-04d541b0249994115320e926dbc9d6c5" class="flex justify-between">
      <a href="/docs/kotlin/" class="">Kotlin</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/kotlin/005_Kotlin_extractList_Method/" class="">005 Kotlin Extract List Method</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/kotlin/004_Kotlin_Scoping_Functions/" class="">004 Kotlin Scoping Functions</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/kotlin/003_Kotlin_basic/" class="">003 Kotlin Basic</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/kotlin/002_Functional_Programming_Example/" class="">002 Functional Programming Example</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/kotlin/001_Functional_Programming/" class="">001 Functional Programming</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-6ae1a891fb3a3f71d71273fc61b29b76" class="toggle"  />
    <label for="section-6ae1a891fb3a3f71d71273fc61b29b76" class="flex justify-between">
      <a href="/docs/linux/" class="">Linux</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-b16ff4658c272fcaa2c58683b4c10070" class="toggle"  />
    <label for="section-b16ff4658c272fcaa2c58683b4c10070" class="flex justify-between">
      <a href="/docs/mongodb/" class="">Mongodb</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-5e9a5c8a0cadf7504bcc8a3083d0b6fb" class="toggle"  />
    <label for="section-5e9a5c8a0cadf7504bcc8a3083d0b6fb" class="flex justify-between">
      <a href="/docs/msa/" class="">Msa</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-6d933f523f0d56e111956755e38e3f44" class="toggle"  />
    <label for="section-6d933f523f0d56e111956755e38e3f44" class="flex justify-between">
      <a href="/docs/mvc/" class="">Mvc</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-e66e2e478c81786f553bd82d3931b216" class="toggle"  />
    <label for="section-e66e2e478c81786f553bd82d3931b216" class="flex justify-between">
      <a href="/docs/mysql/" class="">Mysql</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-3110560962cac834dcd3aead95e804a4" class="toggle"  />
    <label for="section-3110560962cac834dcd3aead95e804a4" class="flex justify-between">
      <a href="/docs/network/" class="">Network</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-83cd0ab2c9840783352e3b96d8e79d5c" class="toggle"  />
    <label for="section-83cd0ab2c9840783352e3b96d8e79d5c" class="flex justify-between">
      <a href="/docs/operating-system/" class="">Operating System</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-bf2e8ecdf9011d9f48a2a3a2c2d46bd1" class="toggle"  />
    <label for="section-bf2e8ecdf9011d9f48a2a3a2c2d46bd1" class="flex justify-between">
      <a href="/docs/oracle/" class="">Oracle</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-708c7a6270d696606cabeb20f951886f" class="toggle"  />
    <label for="section-708c7a6270d696606cabeb20f951886f" class="flex justify-between">
      <a href="/docs/r2dbc/" class="">R2dbc</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/r2dbc/005_r2dbc_Metadata_mapping/" class="">005 R2dbc Metadata Mapping</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/r2dbc/006_r2dbcEntityOperations/" class="">006 R2dbc Entity Operations</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/r2dbc/007_r2dbcRepository/" class="">007 R2dbc Repository</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/r2dbc/008_r2dbc_query_method/" class="">008 R2dbc Query Method</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/r2dbc/003_r2dbcEntityTemplate/" class="">003 R2dbc Entity Template</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/r2dbc/004_r2dbc_object_mapping/" class="">004 R2dbc Object Mapping</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/r2dbc/002_r2dbc_mysql/" class="">002 R2dbc Mysql</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/r2dbc/001_r2dbc_intro/" class="">001 R2dbc Intro</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-0a72c474e6931ed755713a00cb7d19a4" class="toggle" checked />
    <label for="section-0a72c474e6931ed755713a00cb7d19a4" class="flex justify-between">
      <a href="/docs/reactive-streams/" class="">Reactive Streams</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/reactive-streams/002_impl1_reactor/" class="">002 Impl1 Reactor</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/reactive-streams/003_impl2_rxjava/" class="">003 Impl2 Rxjava</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/reactive-streams/004_impl3_munity/" class="">004 Impl3 Munity</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/reactive-streams/001_reactive_streams_component/" class="active">001 Reactive Streams Component</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-a27d7ef673b519721b4909eba7547282" class="toggle"  />
    <label for="section-a27d7ef673b519721b4909eba7547282" class="flex justify-between">
      <a href="/docs/redis/" class="">Redis</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/redis/001_redis_datastructure/" class="">001 Redis Datastructure</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/redis/002_redis_cache/" class="">002 Redis Cache</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-6ce8ef21c020ccdb7ed73156795b30be" class="toggle"  />
    <label for="section-6ce8ef21c020ccdb7ed73156795b30be" class="flex justify-between">
      <a href="/docs/security/" class="">Security</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-4442d34d5ae489970dcda30dcfc7289e" class="toggle"  />
    <label for="section-4442d34d5ae489970dcda30dcfc7289e" class="flex justify-between">
      <a href="/docs/servlet/" class="">Servlet</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-12bece9beab0746d531536027bb6a777" class="toggle"  />
    <label for="section-12bece9beab0746d531536027bb6a777" class="flex justify-between">
      <a href="/docs/spring/" class="">Spring</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-4b72011c96998ec0902edd8bbd5b602e" class="toggle"  />
    <label for="section-4b72011c96998ec0902edd8bbd5b602e" class="flex justify-between">
      <a href="/docs/test/" class="">Test</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-5f1e4c3c9f29fee9a25ac2c5291c7472" class="toggle"  />
    <label for="section-5f1e4c3c9f29fee9a25ac2c5291c7472" class="flex justify-between">
      <a href="/docs/webflux/" class="">Webflux</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>











  
<ul>
  
  <li>
    <a href="/posts/"  >
        Categories and tags
      </a>
  </li>
  
  <li>
    <a href="https://github.com/seohaebada"  target="_blank" rel="noopener">
        Github
      </a>
  </li>
  
  <li>
    <a href="https://devfunny.tistory.com"  target="_blank" rel="noopener">
        Blog
      </a>
  </li>
  
</ul>






</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>001 Reactive Streams Component</strong>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#리액티브-스트림즈란">리액티브 스트림즈란?</a></li>
        <li><a href="#리액티브-구성요소">리액티브 구성요소</a>
          <ul>
            <li></li>
          </ul>
        </li>
        <li><a href="#코드로-보는-리액티브-스트림즈-컴포넌트">코드로 보는 리액티브 스트림즈 컴포넌트</a>
          <ul>
            <li></li>
          </ul>
        </li>
        <li><a href="#구현-예제코드">구현 예제코드</a>
          <ul>
            <li></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown"><h2 id="리액티브-스트림즈란">
  리액티브 스트림즈란?
  <a class="anchor" href="#%eb%a6%ac%ec%95%a1%ed%8b%b0%eb%b8%8c-%ec%8a%a4%ed%8a%b8%eb%a6%bc%ec%a6%88%eb%9e%80">#</a>
</h2>
<p>리액티브한 코드 작성을 위한 구성을 도와주는 리액티브 라이브러리가 있다. <strong>이 리액티브 라이브러리를 어떻게 구현해야할지 정의해놓은 별도의 표준 사양을 리액티브 스트림즈(Reactive Streams)라고 한다.</strong></p>
<p>리액티브 스트림즈는 &lsquo;데이터 스트림을 Non-Blocking이면서 비동기적인 방식으로 처리하기 위한 리액티브 라이브러리 표준 사양&rsquo;이라고 표현할 수 있다. 이를 구현한 구현체로는 RxJava, Reactor, Akka Streams, Java 9 Flow API 등이 있고, 그 중에 Spring framework와 가장 궁합이 잘 맞는 구현체는 Reactor이다.</p>
<h2 id="리액티브-구성요소">
  리액티브 구성요소
  <a class="anchor" href="#%eb%a6%ac%ec%95%a1%ed%8b%b0%eb%b8%8c-%ea%b5%ac%ec%84%b1%ec%9a%94%ec%86%8c">#</a>
</h2>
<p>리액티브 스트림즈를 통해 구현해야 되는 API 컴포넌트에는 Publisher, Subscriber, Subscription, Processor 가 있다. 이 4개의 컴포넌트를 반드시 기억해야한다. 아무래도 이 4개의 역할이 헷갈리면 전체적인 동작과정까지도 헷갈리게되기 때문에 확실히 짚고 넘어가자.</p>
<table>
<thead>
<tr>
<th>컴포넌트</th>
<th>설명</th>
</tr>
</thead>
<tbody>
<tr>
<td>Publisher</td>
<td>데이터를 생성하고 통지(발행, 게시, 방출)하는 역할을 한다.</td>
</tr>
<tr>
<td>Subsriber</td>
<td>구독한 Publisher로부터 통지된 데이터를 전달받아서 처리한다.</td>
</tr>
<tr>
<td>Subscription</td>
<td>Publisher에 요청할 데이터의 개수를 지정하고, 데이터의 구독을 취소하는 역할을 한다.</td>
</tr>
<tr>
<td>Processor</td>
<td>Publisher와 Subscriber의 기능을 모두 가지고 있다. 즉, Subscriber로서 다른 Publisher를 구독할 수 있고, Publisher로서 다른 Subscriber가 구독할 수 있다.</td>
</tr>
</tbody>
</table>
<h4 id="publisher와-subscriber의-동작과정을-나타내는-그림">
  <strong>Publisher와 Subscriber의 동작과정을 나타내는 그림</strong>
  <a class="anchor" href="#publisher%ec%99%80-subscriber%ec%9d%98-%eb%8f%99%ec%9e%91%ea%b3%bc%ec%a0%95%ec%9d%84-%eb%82%98%ed%83%80%eb%82%b4%eb%8a%94-%ea%b7%b8%eb%a6%bc">#</a>
</h4>
<p>
  <img src="/image/reactive_streams/001/img.png" alt="img.png" /></p>
<p>1. 데이터를 구독한다. (subscribe)</p>
<p>먼저 Subscriber는 전달받을 데이터를 구독한다.</p>
<p>2. 데이터를 통지할 준비가 되었음을 알린다. (onSubscribe)</p>
<p>Publisher는 데이터를 통지할 준비가 되었음을 Subscriber에 알린다.</p>
<p>3. 전달 받을 통지 데이터 개수를 요청한다. (Subscription.request)</p>
<p>Publisher가 데이터를 통지할 준비가 되었다는 알림을 받은 Subscriber는 전달받기를 원하는 데이터의 개수를 Publisher에게 요청한다.</p>
<p><em><strong>▶ 데이터의 요청 개수를 지정하는 이유가 뭘까?</strong></em></p>
<p>Subscriber가 Subscription.reuqest를 통해 데이터의 요청 개수를 지정한다. 이는 실제로 Publisher와 Subscriber는 각각 다른 스레드에서 비동기적으로 상호작용하는 경우가 대부분이기 때문이다.</p>
<p>이럴 경우 Publisher가 통지하는 속도가 Publisher로부터 통지된 데이터를 처리하는 Subscriber가 처리하는 속도보다 더 빠르면 처리를 기다리는 데이터가 쌓이게되어 시스템 부하가 커질 수 있다. 이러한 결과를 방지하기 위한 행위다.</p>
<blockquote>
<p>Publisher의 데이터 통지 속도 &gt; 통지된 데이터를 처리하는 Subscriber 속도 </p>
</blockquote>
<p>간단하게 생각해보면 데이터가 전송되는 속도가 데이터가 처리되는 속도보다 빠르면 계속해서 처리해야하는 데이터가 밀리기 때문인 것이다.</p>
<p>4. 데이터를 생성한다.</p>
<p>5. 요청 받은 개수만큼 데이터를 통지한다. (onNext)</p>
<p>Publisher는 Subscriber로부터 요청받은 만큼의 데이터를 통지한다.</p>
<p>6. 데이터 처리를 완료할때까지 위 3~5번의 과정을 반복한다.</p>
<p>이렇게 Publisehr와 Subscriber 간에 데이터 통지, 데이터 수신, 데이터 요청의 과정을 반복한다.</p>
<p>7. 완료 또는 에러가(onError) 발생할때까지 데이터 생성, 통지, 요청을 계속한다.</p>
<p>8. 데이터 통지가 완료되었음을 알린다. (onComplete)</p>
<p>반복하다가 Publisher가 모든 데이터를 통지하게 되면 마지막으로 데이터 전송이 완료되었음을 Subscriber에게 알린다. 만약에 Publisher가 데이터를 처리하는 과정에서 에러가 발생하면 에러가 발생했음을 Subscriber에게 알린다.</p>
<p><em>위 글의 내용으로 이해가 되지 않아도 계속해서 포스팅을 읽자. 추후에 예제코드를 보고나서 다시 위 글을 읽으면 이해가 될것이다.</em></p>
<h2 id="코드로-보는-리액티브-스트림즈-컴포넌트">
  코드로 보는 리액티브 스트림즈 컴포넌트
  <a class="anchor" href="#%ec%bd%94%eb%93%9c%eb%a1%9c-%eb%b3%b4%eb%8a%94-%eb%a6%ac%ec%95%a1%ed%8b%b0%eb%b8%8c-%ec%8a%a4%ed%8a%b8%eb%a6%bc%ec%a6%88-%ec%bb%b4%ed%8f%ac%eb%84%8c%ed%8a%b8">#</a>
</h2>
<p>리액티브 스트림즈 컴포넌트의 동작과정을 이미지와 순서 설명으로 알아보았다. 처리 과정은 이해가 되지만 역시나 Publisher, Subscriber, Subscription, Processor의 코드 흐름이 머릿속으로 그려지지는 않는다. 이제 실제 코드를 보면서 조금씩 머릿속으로 그림을 그려보자.</p>
<h4 id="publisherjava">
  <strong>Publisher.java</strong>
  <a class="anchor" href="#publisherjava">#</a>
</h4>
<pre tabindex="0"><code>public interface Publisher&lt;T&gt; {
    public void subscribe(Subscriber &lt;? super T&gt; subscriber);
}
</code></pre><p>subscribe() 메서드 1개만 존재한다. subscribe() 메서드는 파라미터로 전달받은 Subscriber를 등록하는 역할을 한다.</p>
<p><strong>&lsquo;Publisher는 데이터를 생성하고 통지하는 역할을 하고, Subscriber는 Publisher가 통지하는 데이터를 전달받기 위해 구독을 한다.&rsquo;</strong> 라는 내용으로 봤을때 우리는 구독을 처리하는 subscribe() 메서드가 당연히 Subscriber에 있을거라고 오해할 수 있다. </p>
<p><em><strong>▶ 왜 Subscriber가 아닌 Publisher에 subscribe() 메서드가 정의되어 있을까?</strong></em></p>
<p>리액티브 스트림즈에서의 Publisher/Subscriber는 개념상으로는 Subscriber가 구독을 하는게 맞다. 하지만 실제 코드상으로는 Publisher가 subscribe() 메서드의 파라미터인 Subscriber를 등록하는 형태로 구독이 이뤄진다. 우선 아래의 호출로직으로 Publisher 객체의 subscribe() 메서드를 호출할때 Subscriber 객체를 파라미터로 넘긴다고 이해하자.</p>
<pre tabindex="0"><code>// 구독
pub.subscribe(sub);
</code></pre><h4 id="subscriberjava">
  <strong>Subscriber.java</strong>
  <a class="anchor" href="#subscriberjava">#</a>
</h4>
<pre tabindex="0"><code>public interface Subscriber&lt;T&gt; {
    //구독 시작 처리
    public void onSubscribe(Subscription subscription); // 아래 Subscription을 인자로 전달
    
    //데이터 통지시 처리
    public void onNext(T item);
    
    //에러 통지시 처리
    public void onError(Throwable error);

    //완료 통지시 처리
    public void onComplete();
}
</code></pre><table>
<thead>
<tr>
<th>메서드</th>
<th>설명</th>
</tr>
</thead>
<tbody>
<tr>
<td>onSubscribe</td>
<td>구독 시작 시점에 어떤 처리를 하는 역할을 한다. 여기서의 처리는 Publisher에게 요청할 데이터의 개수를 지정하거나 구독을 해지하는 것을 의미한다.   이것은 onSubscribe 메서드의 파라미터로 전달되는 Subscription 객체를 통해서 이뤄진다.</td>
</tr>
<tr>
<td>onNext</td>
<td>Publisher가 통지한 데이터를 처리하는 역할을 한다.</td>
</tr>
<tr>
<td>onError</td>
<td>Publisher가 데이터를 통지를 위한 처리 과정에서 에러가 발생했을때 해당 에러를 처리하는 역할을 한다.</td>
</tr>
<tr>
<td>onComplete</td>
<td>Publisher가 데이터 통지를 완료했음을 알릴 때 호출되는 메서드다.   데이터 통지가 정상적으로 완료될 경우에 어떤 후처리를 해야한다면 omComplete 메서드에서 처리 코드를 작성하면 된다.</td>
</tr>
</tbody>
</table>
<h4 id="subscriptonjava">
  <strong>Subscripton.java</strong>
  <a class="anchor" href="#subscriptonjava">#</a>
</h4>
<pre tabindex="0"><code>public interface Subscription { // 통지받을 데이터 개수를 지정해 데이터 통지를 요청하거나 통지받지 않게 구독을 해지할때 사용하는 인터페이스
    //통지받을 데이터 개수 요청
    public void request(long num);
    
    //구독 해지
    public void cancel(); // Subscriber에서 호출함 (Subscription을 받은 Subscriber에서 구독 해지를 위해 호출)
}
</code></pre><table>
<thead>
<tr>
<th>메서드</th>
<th>설명</th>
</tr>
</thead>
<tbody>
<tr>
<td>request</td>
<td>Subscriber가 구독한 데이터의 개수를 요청한다.   Publisher에게 데이터의 개수를 요청할 수 있다.</td>
</tr>
<tr>
<td>cancel</td>
<td>구독을 해지한다.</td>
</tr>
</tbody>
</table>
<blockquote>
<p>실제 구독하는 구현코드! 위의 설명을 돕기위한 예제 코드다.</p>
</blockquote>
<pre tabindex="0"><code>// Publisher
Publisher&lt;Integer&gt; pub = new Publisher&lt;Integer&gt;() {
    @Override
    public void subscribe(Subscriber&lt;? super Integer&gt; sub) {
        sub.onSubscribe(new Subscription() {
            @Override
            public void request(long n) {
                ...
            }

            @Override
            public void cancel() {
                ...
            }
        });
    }
};

// Subscriber
Subscriber&lt;Integer&gt; sub = new Subscriber&lt;Integer&gt;() {
    @Override
    public void onSubscribe(Subscription s) {
        log.debug(&#34;onSubscribe&#34;);
        s.request(Long.MAX_VALUE);
    }

    @Override
    public void onNext(Integer i) {
        log.debug(&#34;onNext:{}&#34;, i);
    }

    @Override
    public void onError(Throwable t) {
        log.debug(&#34;onError:{}&#34;, t);
    }

    @Override
    public void onComplete() {
        log.debug(&#34;onComplete&#34;);
    }
};


// 구독
pub.subscribe(sub);
</code></pre><p>결국 Publisher의 subscribe() 메서드를 호출하여 구독하는데, 이때 파라미터 Subscriber 객체를 넘기면 된다.</p>
<blockquote>
<p>위 코드의 흐름</p>
</blockquote>
<p>Publisher와 Subscriber의 동작과정을 리액티브 스트림즈의 컴포넌트 코드 관점에서 다시 이해해보자.</p>
<table>
<thead>
<tr>
<th>순서</th>
<th>과정</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Publisher가 Subscriber 인터페이스 구현 객체를 subscribe 메서드의 파라미터로 전달한다.</td>
</tr>
<tr>
<td>2</td>
<td>Publisher 냅에서는 전달받은 Subscriber 인터페이스 구현 객체의 onSubscribe 메서드를 호출하면서 Subscriber의 구독을 의미하는 Subscription 인터페이스 구현 객체를 Subscriber에게 전달한다.</td>
</tr>
<tr>
<td>3</td>
<td>호출된 Subscriber 인터페이스 구현 객체의 onSubscribe() 메서드에서 전달받은 Subscription 객체를 통해 전달받을 데이터의 개수를 Publisher 에게 요청한다.</td>
</tr>
<tr>
<td>4</td>
<td>Publisher는 Subscriber로부터 전달받은 요청 개수만큼의 데이터를 onNext() 메서드를 호출해서 Subsriber에게 전달한다.</td>
</tr>
<tr>
<td>5</td>
<td>Publisher는 통지할 데이터가 더이상 없을 경우 onComplete 메서드를 호출해서 Subscriber에게 데이터 처리 종료를 알린다.</td>
</tr>
</tbody>
</table>
<h4 id="processorjava">
  <strong>Processor.java</strong>
  <a class="anchor" href="#processorjava">#</a>
</h4>
<pre tabindex="0"><code>public abstract interface Processor&lt;T, R&gt; extends Subscriber&lt;T&gt;, Publichser&lt;R&gt; {}
</code></pre><p>Processor 인터페이스는 별도로 구현해야할 메서드가 없다. 대신 Subscriber, Publisher 인터페이스를 상속하고있다. 리액티브 스트림즈 컴포넌트에서 설명한대로 Processor가 Publisher과 Subscriber 기능을 모두 가지고있기 때문이다.</p>
<h2 id="구현-예제코드">
  구현 예제코드
  <a class="anchor" href="#%ea%b5%ac%ed%98%84-%ec%98%88%ec%a0%9c%ec%bd%94%eb%93%9c">#</a>
</h2>
<pre tabindex="0"><code>@Slf4j
public class E05_PubSub_2 {
    public static void main(String[] args) {
        Publisher&lt;Integer&gt; pub = iterPub(Stream.iterate(1, a -&gt; a + 1).limit(10).collect(Collectors.toList()));

        // 구독자
        Subscriber&lt;Integer&gt; sub = logSub();

        // 구독 시작
        pub.subscribe(sub);
    }

    private static Subscriber&lt;Integer&gt; logSub() {
        Subscriber&lt;Integer&gt; sub = new Subscriber&lt;Integer&gt;() {
            @Override
            public void onSubscribe(Subscription s) {
                // Subscription 의 request 를 요청해야한다.
                log.debug(&#34;onSubscribe&#34;);
                s.request(Long.MAX_VALUE);
            }

            @Override
            public void onNext(Integer i) {
                log.debug(&#34;onNext:{}&#34;, i);
            }

            @Override
            public void onError(Throwable t) {
                log.debug(&#34;onError:{}&#34;, t);
            }

            @Override
            public void onComplete() {
                log.debug(&#34;onComplete&#34;);
            }
        };

        return sub;
    }

    private static Publisher&lt;Integer&gt; iterPub(List&lt;Integer&gt; iter) {
        Publisher&lt;Integer&gt; pub = new Publisher&lt;Integer&gt;() {
            // Publisher 의 구현해야하는 메서드
            @Override
            public void subscribe(Subscriber&lt;? super Integer&gt; sub) { // 호출하면 그때부터 데이터를 통지
                // Subscription : Publisher, Subscriber 둘 사이의 구독이 한번 일어난다는 의미
                sub.onSubscribe(new Subscription() {
                    @Override
                    public void request(long n) {
                        try {
                            // iterable 의 원소를 통지한다.
                            iter.forEach(s -&gt; sub.onNext(s));
                            // 여기서 멈추면 안되고, publisher 가 데이터 통지가 완료했으면 완료됨을 호출해야한다.
                            sub.onComplete();
                        } catch (Throwable t) {
                            // 에러 처리
                            sub.onError(t);
                        }
                    }

                    /**
                     * Subscriber 에서 Subscription 객체의 cancel()을 호출할 수 있다.
                     * 더이상 데이터를 통지받지 않겠다고 알림
                     */
                    @Override
                    public void cancel() {

                    }
                });
            }
        };
        return pub;
    }
}
</code></pre><ol>
<li>Publisher 객체 생성</li>
</ol>
<pre tabindex="0"><code>Publisher&lt;Integer&gt; pub = iterPub(Stream.iterate(1, a -&gt; a + 1).limit(10).collect(Collectors.toList()));
</code></pre><p>
  <img src="/image/reactive_streams/001/img_1.png" alt="img_1.png" /></p>
<ol start="2">
<li>Subscriber 객체 생성</li>
</ol>
<pre tabindex="0"><code>Subscriber&lt;Integer&gt; sub = logSub();
</code></pre><ol start="3">
<li>구독 실행!</li>
</ol>
<pre tabindex="0"><code>pub.subscribe(sub);
</code></pre><h4 id="여기서부터-실행-흐름을-들여다보자">
  <strong>여기서부터 실행 흐름을 들여다보자.</strong>
  <a class="anchor" href="#%ec%97%ac%ea%b8%b0%ec%84%9c%eb%b6%80%ed%84%b0-%ec%8b%a4%ed%96%89-%ed%9d%90%eb%a6%84%ec%9d%84-%eb%93%a4%ec%97%ac%eb%8b%a4%eb%b3%b4%ec%9e%90">#</a>
</h4>
<ol>
<li>Subscriber 객체의 onSubscribe() 호출</li>
</ol>
<table>
<thead>
<tr>
<th>메서드</th>
<th>설명</th>
</tr>
</thead>
<tbody>
<tr>
<td>onSubscribe</td>
<td>구독 시작 시점에 어떤 처리를 하는 역할을 한다. 여기서의 처리는 Publisher에게 요청할 데이터의 개수를 지정하거나 구독을 해지하는 것을 의미한다.   이것은 onSubscribe 메서드의 파라미터로 전달되는 Subscription 객체를 통해서 이뤄진다.</td>
</tr>
</tbody>
</table>
<p>
  <img src="/image/reactive_streams/001/img_2.png" alt="img_2.png" /></p>
<ol start="2">
<li>Subscriber 객체의 onNext() 호출</li>
</ol>
<table>
<thead>
<tr>
<th>메서드</th>
<th>설명</th>
</tr>
</thead>
<tbody>
<tr>
<td>onNext</td>
<td>Publisher가 통지한 데이터를 처리하는 역할을 한다.</td>
</tr>
</tbody>
</table>
<p>
  <img src="/image/reactive_streams/001/img_3.png" alt="img_3.png" />!</p>
<ol start="3">
<li>
<p>위 1)~2)번 반복</p>
</li>
<li>
<p>1, 2, 3 ~ 9까지 반복 완료 후 마지막 데이터인 10의 onNext()가 호출된 시점이 왔다.</p>
</li>
</ol>
<p>
  <img src="/image/reactive_streams/001/img_4.png" alt="img_4.png" /></p>
<ol start="5">
<li>모든 데이터 통지가 완료되었으므로 onComplete() 메서드 호출</li>
</ol>
<table>
<thead>
<tr>
<th>메서드</th>
<th>설명</th>
</tr>
</thead>
<tbody>
<tr>
<td>onComplete</td>
<td>Publisher가 데이터 통지를 완료했음을 알릴 때 호출되는 메서드다.   데이터 통지가 정상적으로 완료될 경우에 어떤 후처리를 해야한다면 omComplete 메서드에서 처리 코드를 작성하면 된다.</td>
</tr>
</tbody>
</table>
<p>
  <img src="/image/reactive_streams/001/img_5.png" alt="img_5.png" /></p>
<p>▶ Subscriber 객체의 onComplete() 호출된 모습</p>
<p>
  <img src="/image/reactive_streams/001/img_6.png" alt="img_6.png" /></p>
<blockquote>
<p>실행결과</p>
</blockquote>
<pre tabindex="0"><code>[main] DEBUG com.reactive.step02.E05_PubSub_2 - onSubscribe
[main] DEBUG com.reactive.step02.E05_PubSub_2 - onNext:1
[main] DEBUG com.reactive.step02.E05_PubSub_2 - onNext:2
[main] DEBUG com.reactive.step02.E05_PubSub_2 - onNext:3
[main] DEBUG com.reactive.step02.E05_PubSub_2 - onNext:4
[main] DEBUG com.reactive.step02.E05_PubSub_2 - onNext:5
[main] DEBUG com.reactive.step02.E05_PubSub_2 - onNext:6
[main] DEBUG com.reactive.step02.E05_PubSub_2 - onNext:7
[main] DEBUG com.reactive.step02.E05_PubSub_2 - onNext:8
[main] DEBUG com.reactive.step02.E05_PubSub_2 - onNext:9
[main] DEBUG com.reactive.step02.E05_PubSub_2 - onNext:10
[main] DEBUG com.reactive.step02.E05_PubSub_2 - onComplete
</code></pre></article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">


  <div><a class="flex align-center" href="https://github.com/seohaebada/TIL/commit/e9bdf02d3c68bfe804b981f370317e75592bffc2" title='Last modified by seohaebada | December 2, 2023' target="_blank" rel="noopener">
      <img src="/svg/calendar.svg" class="book-icon" alt="Calendar" />
      <span>December 2, 2023</span>
    </a>
  </div>



  <div>
    <a class="flex align-center" href="https://github.com/seohaebada/TIL/content/docs/content/docs/reactive%20streams/001_reactive_streams_component.md" target="_blank" rel="noopener">
      <img src="/svg/edit.svg" class="book-icon" alt="Edit" />
      <span>Edit this page</span>
    </a>
  </div>


</div>



  <script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script>


 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#리액티브-스트림즈란">리액티브 스트림즈란?</a></li>
        <li><a href="#리액티브-구성요소">리액티브 구성요소</a>
          <ul>
            <li></li>
          </ul>
        </li>
        <li><a href="#코드로-보는-리액티브-스트림즈-컴포넌트">코드로 보는 리액티브 스트림즈 컴포넌트</a>
          <ul>
            <li></li>
          </ul>
        </li>
        <li><a href="#구현-예제코드">구현 예제코드</a>
          <ul>
            <li></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












