<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="ReactiveMongoOperations # ReactiveMongoOperations # ReactiveFluentMongoOperations를 상속 ReactiveFluentMongoOperations는 여러 Operations를 상속 ReactiveFindOperation: find query와 관련된 메서드 제공 ReactiveInsertOperation: insert query와 관련된 메서드 제공 ReactiveUpdateOperation: update query와 관련된 메서드 제공 ReactiveRemoveOperation: delete query와 관련된 메서드 제공 ReactiveAggregationOperation: aggregation query와 관련된 메서드 제공 ReactiveChangeStreamOperation: watch query와 관련된 메서드 제공 ReactiveFindOperation # ReactiveFindOperation의 query 부터 시작 TerminatingFind의 count, exists, first, one, all, tail 등으로 종료 query -&gt; inCollection -&gt; as -&gt; matching -&gt; 최종 query -&gt; inCollection -&gt; matching -&gt; 최종 query -&gt; as -&gt; matching -&gt; 최종 query -&gt; matching -&gt; 최종 query -&gt; 최종 ReactiveFindOperation # inCollection query를 실행할 collection 이름을 전달 제공되지 않을 경우 domain Type의 class 이름 통해 collection 이름 획득 @Document 어노테이션 통해 collection 이름 획득 as Entity를 전부 mapping하지 않고 특정 필드만 mapping 하고 싶은 경우 Entity의 일부 property만 담고 있는 subclass 또는 interface를 넘겨서 projection projection이 제공되지 않는다면 Entity에 모든 필드를 mapping matching query의 filter에 해당 Query를 전달하여 filter에 들어갈 내용을 설정 matching을 생략하면 collection 전체에 대한 요청을 보내는 것과 동일 최종 마지막으로 count, exists, first, one, all, tail 등의 연산을 선택 count: 조건에 맞는 document의 개수 반환 exists: 조건에 맞는 document 존재 여부 반환 first: 조건에 맞는 첫 번째 document 반환 one: 조건에 맞는 하나의 document 반환.">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#343a40">
<meta name="color-scheme" content="light dark"><meta property="og:title" content="" />
<meta property="og:description" content="ReactiveMongoOperations # ReactiveMongoOperations # ReactiveFluentMongoOperations를 상속 ReactiveFluentMongoOperations는 여러 Operations를 상속 ReactiveFindOperation: find query와 관련된 메서드 제공 ReactiveInsertOperation: insert query와 관련된 메서드 제공 ReactiveUpdateOperation: update query와 관련된 메서드 제공 ReactiveRemoveOperation: delete query와 관련된 메서드 제공 ReactiveAggregationOperation: aggregation query와 관련된 메서드 제공 ReactiveChangeStreamOperation: watch query와 관련된 메서드 제공 ReactiveFindOperation # ReactiveFindOperation의 query 부터 시작 TerminatingFind의 count, exists, first, one, all, tail 등으로 종료 query -&gt; inCollection -&gt; as -&gt; matching -&gt; 최종 query -&gt; inCollection -&gt; matching -&gt; 최종 query -&gt; as -&gt; matching -&gt; 최종 query -&gt; matching -&gt; 최종 query -&gt; 최종 ReactiveFindOperation # inCollection query를 실행할 collection 이름을 전달 제공되지 않을 경우 domain Type의 class 이름 통해 collection 이름 획득 @Document 어노테이션 통해 collection 이름 획득 as Entity를 전부 mapping하지 않고 특정 필드만 mapping 하고 싶은 경우 Entity의 일부 property만 담고 있는 subclass 또는 interface를 넘겨서 projection projection이 제공되지 않는다면 Entity에 모든 필드를 mapping matching query의 filter에 해당 Query를 전달하여 filter에 들어갈 내용을 설정 matching을 생략하면 collection 전체에 대한 요청을 보내는 것과 동일 최종 마지막으로 count, exists, first, one, all, tail 등의 연산을 선택 count: 조건에 맞는 document의 개수 반환 exists: 조건에 맞는 document 존재 여부 반환 first: 조건에 맞는 첫 번째 document 반환 one: 조건에 맞는 하나의 document 반환." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://example.com/docs/mongodb/005_mongoOperations/" /><meta property="article:section" content="docs" />
<meta property="article:published_time" content="2023-12-11T00:00:00+00:00" />
<meta property="article:modified_time" content="2023-12-21T16:12:33+09:00" />

<title>005 Mongo Operations | TIL</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" >
<link rel="canonical" href="https://example.com/docs/mongodb/005_mongoOperations/">
<link rel="stylesheet" href="/book.min.33a48f5432973b8ff9a82679d9e45d67f2c15d4399bd2829269455cfe390b5e8.css" integrity="sha256-M6SPVDKXO4/5qCZ52eRdZ/LBXUOZvSgpJpRVz&#43;OQteg=" crossorigin="anonymous">
  <script defer src="/flexsearch.min.js"></script>
  <script defer src="/en.search.min.f4504dc334585558e44a334fa4b45aad0ce84e6425ba72df3b199ec75cef982b.js" integrity="sha256-9FBNwzRYVVjkSjNPpLRarQzoTmQlunLfOxmex1zvmCs=" crossorigin="anonymous"></script>

  <script defer src="/sw.min.6f6f90fcb8eb1c49ec389838e6b801d0de19430b8e516902f8d75c3c8bd98739.js" integrity="sha256-b2&#43;Q/LjrHEnsOJg45rgB0N4ZQwuOUWkC&#43;NdcPIvZhzk=" crossorigin="anonymous"></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/"><span>TIL</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>












  



  
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-353f7a5578fa41dbc42c73ea30fe2255" class="toggle"  />
    <label for="section-353f7a5578fa41dbc42c73ea30fe2255" class="flex justify-between">
      <a href="/docs/algorithm/" class="">Algorithm</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-92d85911959de2466ef66b3821f607d7" class="toggle"  />
    <label for="section-92d85911959de2466ef66b3821f607d7" class="flex justify-between">
      <a href="/docs/batch/" class="">Batch</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/batch/002_batch_performance/" class="">002 Batch Performance</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/batch/001_performance_improved_batch/" class="">001 Performance Improved Batch</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-17728c6c6bedfdb3d8e5f42b88c6a9db" class="toggle"  />
    <label for="section-17728c6c6bedfdb3d8e5f42b88c6a9db" class="flex justify-between">
      <a href="/docs/clean_code/" class="">Clean Code</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/clean_code/001_argument/" class="">001 Argument</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-7cc6bc3da96a6c77d5e4cc0966a5e312" class="toggle"  />
    <label for="section-7cc6bc3da96a6c77d5e4cc0966a5e312" class="flex justify-between">
      <a href="/docs/data_structure/" class="">Data Structure</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-f63d6cf864a4b2a00c9bc1b7f8921b37" class="toggle"  />
    <label for="section-f63d6cf864a4b2a00c9bc1b7f8921b37" class="flex justify-between">
      <a href="/docs/ddd/" class="">Ddd</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-10d41b0387e5bda7e9958b9b5ece051e" class="toggle"  />
    <label for="section-10d41b0387e5bda7e9958b9b5ece051e" class="flex justify-between">
      <a href="/docs/docker/" class="">Docker</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-ba0b1465c1bad5a998860ad5f870bf7e" class="toggle"  />
    <label for="section-ba0b1465c1bad5a998860ad5f870bf7e" class="flex justify-between">
      <a href="/docs/etc/" class="">Etc</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/etc/005_rabbit_mq/" class="">005 Rabbit Mq</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/etc/004_sonar_qube/" class="">004 Sonar Qube</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/etc/003_huge_traffic_handling/" class="">003 Huge Traffic Handling</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/etc/002_tps/" class="">002 Tps</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/etc/001_jmeter/" class="">001 Jmeter</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-eca69da21de5b0cd25d8421dec09a327" class="toggle"  />
    <label for="section-eca69da21de5b0cd25d8421dec09a327" class="flex justify-between">
      <a href="/docs/java/" class="">Java</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/java/001_facade_pattern/" class="">001 Facade Pattern</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-f3c1d22d19edbcf158d04b84a4d9d6c2" class="toggle"  />
    <label for="section-f3c1d22d19edbcf158d04b84a4d9d6c2" class="flex justify-between">
      <a href="/docs/jenkins/" class="">Jenkins</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-55218fb7ef47d61aa86fc77253026243" class="toggle"  />
    <label for="section-55218fb7ef47d61aa86fc77253026243" class="flex justify-between">
      <a href="/docs/jpa/" class="">Jpa</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-c03dced0c5b16cbce767a51b81ce1077" class="toggle"  />
    <label for="section-c03dced0c5b16cbce767a51b81ce1077" class="flex justify-between">
      <a href="/docs/kafka/" class="">Kafka</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/kafka/008_topic_partition/" class="">008 Topic Partition</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/kafka/009_record/" class="">009 Record</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/kafka/010_metadata/" class="">010 Metadata</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/kafka/006_replication/" class="">006 Replication</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/kafka/007_isr/" class="">007 Isr</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/kafka/004_kafka_broker/" class="">004 Kafka Broker</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/kafka/005_broker_log_segment/" class="">005 Broker Log Segment</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/kafka/003_transactional_outbox_pattern/" class="">003 Transactional Outbox Pattern</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/kafka/002_kafka_intro/" class="">002 Kafka Intro</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/kafka/001_kafka_cdc/" class="">001 Kafka Cdc</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-04d541b0249994115320e926dbc9d6c5" class="toggle"  />
    <label for="section-04d541b0249994115320e926dbc9d6c5" class="flex justify-between">
      <a href="/docs/kotlin/" class="">Kotlin</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/kotlin/005_Kotlin_extractList_Method/" class="">005 Kotlin Extract List Method</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/kotlin/006_kotlin_nullsafe/" class="">006 Kotlin Nullsafe</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/kotlin/004_Kotlin_Scoping_Functions/" class="">004 Kotlin Scoping Functions</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/kotlin/003_Kotlin_basic/" class="">003 Kotlin Basic</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/kotlin/002_Functional_Programming_Example/" class="">002 Functional Programming Example</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/kotlin/001_Functional_Programming/" class="">001 Functional Programming</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-6ae1a891fb3a3f71d71273fc61b29b76" class="toggle"  />
    <label for="section-6ae1a891fb3a3f71d71273fc61b29b76" class="flex justify-between">
      <a href="/docs/linux/" class="">Linux</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-b16ff4658c272fcaa2c58683b4c10070" class="toggle" checked />
    <label for="section-b16ff4658c272fcaa2c58683b4c10070" class="flex justify-between">
      <a href="/docs/mongodb/" class="">Mongodb</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/mongodb/003_spring_data_mongodb/" class="">003 Spring Data Mongodb</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/mongodb/004_object_mapping/" class="">004 Object Mapping</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/mongodb/005_mongoOperations/" class="active">005 Mongo Operations</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/mongodb/006_reactiveMongoRepository/" class="">006 Reactive Mongo Repository</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/mongodb/007_query_method/" class="">007 Query Method</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/mongodb/001_reactive_mongodb/" class="">001 Reactive Mongodb</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/mongodb/002_mongodb_document/" class="">002 Mongodb Document</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-5e9a5c8a0cadf7504bcc8a3083d0b6fb" class="toggle"  />
    <label for="section-5e9a5c8a0cadf7504bcc8a3083d0b6fb" class="flex justify-between">
      <a href="/docs/msa/" class="">Msa</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/msa/003_circuit_breaker/" class="">003 Circuit Breaker</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/msa/001_reactive/" class="">001 Reactive</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/msa/002_reactive_microservice/" class="">002 Reactive Microservice</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-6d933f523f0d56e111956755e38e3f44" class="toggle"  />
    <label for="section-6d933f523f0d56e111956755e38e3f44" class="flex justify-between">
      <a href="/docs/mvc/" class="">Mvc</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-e66e2e478c81786f553bd82d3931b216" class="toggle"  />
    <label for="section-e66e2e478c81786f553bd82d3931b216" class="flex justify-between">
      <a href="/docs/mysql/" class="">Mysql</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-3110560962cac834dcd3aead95e804a4" class="toggle"  />
    <label for="section-3110560962cac834dcd3aead95e804a4" class="flex justify-between">
      <a href="/docs/network/" class="">Network</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-bbe16af0cda0a52165d4874f0cea4ee0" class="toggle"  />
    <label for="section-bbe16af0cda0a52165d4874f0cea4ee0" class="flex justify-between">
      <a href="/docs/operating_system/" class="">Operating System</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/operating_system/001_thread/" class="">001 Thread</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-bf2e8ecdf9011d9f48a2a3a2c2d46bd1" class="toggle"  />
    <label for="section-bf2e8ecdf9011d9f48a2a3a2c2d46bd1" class="flex justify-between">
      <a href="/docs/oracle/" class="">Oracle</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-2aa56d1b653c397446719c79393a70da" class="toggle"  />
    <label for="section-2aa56d1b653c397446719c79393a70da" class="flex justify-between">
      <a href="/docs/parallel_programming/" class="">Parallel Programming</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-d7776bf677bfc1c527b3b7b3b1cac71a" class="toggle"  />
    <label for="section-d7776bf677bfc1c527b3b7b3b1cac71a" class="flex justify-between">
      <a href="/docs/parallel_programming/lecture01/" class="">Lecture01</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/parallel_programming/lecture01/046_executorService_api/" class="">046 Executor Service API</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/parallel_programming/lecture01/047_executorService_invoke/" class="">047 Executor Service Invoke</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/parallel_programming/lecture01/045_future/" class="">045 Future</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/parallel_programming/lecture01/044_runnable_callable/" class="">044 Runnable Callable</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/parallel_programming/lecture01/042_threadpool/" class="">042 Threadpool</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/parallel_programming/lecture01/043_executor/" class="">043 Executor</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/parallel_programming/lecture01/038_cas_algorithm/" class="">038 Cas Algorithm</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/parallel_programming/lecture01/039_atomic/" class="">039 Atomic</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/parallel_programming/lecture01/040_countDownLatch/" class="">040 Count Down Latch</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/parallel_programming/lecture01/041_cyclicBarrier/" class="">041 Cyclic Barrier</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/parallel_programming/lecture01/036_reentrantReadWriteLock/" class="">036 Reentrant Read Write Lock</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/parallel_programming/lecture01/037_condition/" class="">037 Condition</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/parallel_programming/lecture01/035_reentrantLock/" class="">035 Reentrant Lock</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/parallel_programming/lecture01/034_lock_ReentrantLock/" class="">034 Lock Reentrant Lock</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/parallel_programming/lecture01/032_volatile/" class="">032 Volatile</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/parallel_programming/lecture01/033_deadlock/" class="">033 Deadlock</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/parallel_programming/lecture01/031_wait_notify/" class="">031 Wait Notify</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/parallel_programming/lecture01/030_synchronized_etc/" class="">030 Synchronized Etc</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/parallel_programming/lecture01/029_method_synchronized/" class="">029 Method Synchronized</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/parallel_programming/lecture01/027_spin_lock/" class="">027 Spin Lock</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/parallel_programming/lecture01/028_synchronized_basic/" class="">028 Synchronized Basic</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/parallel_programming/lecture01/026_monitor/" class="">026 Monitor</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/parallel_programming/lecture01/024_mutual_exclusion/" class="">024 Mutual Exclusion</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/parallel_programming/lecture01/025_semaphore/" class="">025 Semaphore</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/parallel_programming/lecture01/020_single_multi_thread/" class="">020 Single Multi Thread</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/parallel_programming/lecture01/021_synchronized_cpu/" class="">021 Synchronized CPU</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/parallel_programming/lecture01/022_critical_section/" class="">022 Critical Section</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/parallel_programming/lecture01/023_thread_safe/" class="">023 Thread Safe</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/parallel_programming/lecture01/017_thread_type/" class="">017 Thread Type</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/parallel_programming/lecture01/018_thread_group/" class="">018 Thread Group</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/parallel_programming/lecture01/019_threadLocal/" class="">019 Thread Local</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/parallel_programming/lecture01/012_thread_interrupt/" class="">012 Thread Interrupt</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/parallel_programming/lecture01/013_thread_info/" class="">013 Thread Info</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/parallel_programming/lecture01/014_thread_priority/" class="">014 Thread Priority</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/parallel_programming/lecture01/015_thread_uncaughtExceptionHandler/" class="">015 Thread Uncaught Exception Handler</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/parallel_programming/lecture01/016_thread_stop_flag/" class="">016 Thread Stop Flag</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/parallel_programming/lecture01/011_thread_join/" class="">011 Thread Join</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/parallel_programming/lecture01/010_thread_sleep/" class="">010 Thread Sleep</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/parallel_programming/lecture01/009_thread_status/" class="">009 Thread Status</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/parallel_programming/lecture01/008_thread_start/" class="">008 Thread Start</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/parallel_programming/lecture01/004_cpu_bound_io_bound/" class="">004 CPU Bound Io Bound</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/parallel_programming/lecture01/005_user_kernel_systemcall/" class="">005 User Kernel Systemcall</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/parallel_programming/lecture01/006_user_mode_kernel_mode_thread/" class="">006 User Mode Kernel Mode Thread</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/parallel_programming/lecture01/007_java_thread/" class="">007 Java Thread</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/parallel_programming/lecture01/003_context_switching/" class="">003 Context Switching</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/parallel_programming/lecture01/001_process_thread/" class="">001 Process Thread</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/parallel_programming/lecture01/002_parallel_concurrent/" class="">002 Parallel Concurrent</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-708c7a6270d696606cabeb20f951886f" class="toggle"  />
    <label for="section-708c7a6270d696606cabeb20f951886f" class="flex justify-between">
      <a href="/docs/r2dbc/" class="">R2dbc</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/r2dbc/005_r2dbc_Metadata_mapping/" class="">005 R2dbc Metadata Mapping</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/r2dbc/006_r2dbcEntityOperations/" class="">006 R2dbc Entity Operations</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/r2dbc/007_r2dbcRepository/" class="">007 R2dbc Repository</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/r2dbc/008_r2dbc_query_method/" class="">008 R2dbc Query Method</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/r2dbc/003_r2dbcEntityTemplate/" class="">003 R2dbc Entity Template</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/r2dbc/004_r2dbc_object_mapping/" class="">004 R2dbc Object Mapping</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/r2dbc/002_r2dbc_mysql/" class="">002 R2dbc Mysql</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/r2dbc/001_r2dbc_intro/" class="">001 R2dbc Intro</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-c1a35f6db1170c97addf30f5d9f50bc9" class="toggle"  />
    <label for="section-c1a35f6db1170c97addf30f5d9f50bc9" class="flex justify-between">
      <a href="/docs/rdbms/" class="">Rdbms</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/rdbms/004_window_function/" class="">004 Window Function</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/rdbms/005_subquery/" class="">005 Subquery</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/rdbms/001_basic_join/" class="">001 Basic Join</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/rdbms/002_date_interval/" class="">002 Date Interval</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/rdbms/003_groupby/" class="">003 Groupby</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-a396ef4e072acbb7275e447dad1284d6" class="toggle"  />
    <label for="section-a396ef4e072acbb7275e447dad1284d6" class="flex justify-between">
      <a href="/docs/reactive_streams/" class="">Reactive Streams</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/reactive_streams/002_impl1_reactor/" class="">002 Impl1 Reactor</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/reactive_streams/003_impl2_rxjava/" class="">003 Impl2 Rxjava</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/reactive_streams/004_impl3_munity/" class="">004 Impl3 Munity</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/reactive_streams/001_reactive_streams_component/" class="">001 Reactive Streams Component</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-a27d7ef673b519721b4909eba7547282" class="toggle"  />
    <label for="section-a27d7ef673b519721b4909eba7547282" class="flex justify-between">
      <a href="/docs/redis/" class="">Redis</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/redis/008_spring_session_redis/" class="">008 Spring Session Redis</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/redis/007_redis_cluster_migration/" class="">007 Redis Cluster Migration</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/redis/003_reactive_redis_intro/" class="">003 Reactive Redis Intro</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/redis/004_Lettuce/" class="">004 Lettuce</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/redis/005_ReactiveRedisTemplate/" class="">005 Reactive Redis Template</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/redis/006_ReactiveOperations/" class="">006 Reactive Operations</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/redis/001_redis_datastructure/" class="">001 Redis Datastructure</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/redis/002_redis_cache/" class="">002 Redis Cache</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-6ce8ef21c020ccdb7ed73156795b30be" class="toggle"  />
    <label for="section-6ce8ef21c020ccdb7ed73156795b30be" class="flex justify-between">
      <a href="/docs/security/" class="">Security</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-4442d34d5ae489970dcda30dcfc7289e" class="toggle"  />
    <label for="section-4442d34d5ae489970dcda30dcfc7289e" class="flex justify-between">
      <a href="/docs/servlet/" class="">Servlet</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-12bece9beab0746d531536027bb6a777" class="toggle"  />
    <label for="section-12bece9beab0746d531536027bb6a777" class="flex justify-between">
      <a href="/docs/spring/" class="">Spring</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-bc7d9ceb6dc60f10f3ecfb9266f57cb9" class="toggle"  />
    <label for="section-bc7d9ceb6dc60f10f3ecfb9266f57cb9" class="flex justify-between">
      <a href="/docs/springbatch/" class="">Springbatch</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/springbatch/006_step/" class="">006 Step</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/springbatch/007_StepExecution/" class="">007 Step Execution</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/springbatch/008_StepContribution/" class="">008 Step Contribution</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/springbatch/004_JobParameter/" class="">004 Job Parameter</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/springbatch/005_JobExecution/" class="">005 Job Execution</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/springbatch/002_Job/" class="">002 Job</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/springbatch/003_JobInstance/" class="">003 Job Instance</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/springbatch/001_springbatch_start/" class="">001 Springbatch Start</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-0bd71e23782ecc3b5174eb29487ca4db" class="toggle"  />
    <label for="section-0bd71e23782ecc3b5174eb29487ca4db" class="flex justify-between">
      <a href="/docs/system_design/" class="">System Design</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/system_design/003_system_design_interview/" class="">003 System Design Interview</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/system_design/001_system_expansion/" class="">001 System Expansion</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/system_design/002_system_size_estimation/" class="">002 System Size Estimation</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-5f1e4c3c9f29fee9a25ac2c5291c7472" class="toggle"  />
    <label for="section-5f1e4c3c9f29fee9a25ac2c5291c7472" class="flex justify-between">
      <a href="/docs/webflux/" class="">Webflux</a>
    </label>
  

          
  <ul>
    
  </ul>

        </li>
      
    
  </ul>











  
<ul>
  
  <li>
    <a href="/posts/"  >
        Categories and tags
      </a>
  </li>
  
  <li>
    <a href="https://github.com/seohaebada"  target="_blank" rel="noopener">
        Github
      </a>
  </li>
  
  <li>
    <a href="https://devfunny.tistory.com"  target="_blank" rel="noopener">
        Blog
      </a>
  </li>
  
</ul>






</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>005 Mongo Operations</strong>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#reactivemongooperations">ReactiveMongoOperations</a>
      <ul>
        <li><a href="#reactivemongooperations-1">ReactiveMongoOperations</a></li>
        <li><a href="#reactivefindoperation">ReactiveFindOperation</a></li>
        <li><a href="#reactivefindoperation-1">ReactiveFindOperation</a></li>
        <li><a href="#reactivefindoperation-실행">ReactiveFindOperation 실행</a></li>
        <li><a href="#reactiveinsertoperation">ReactiveInsertOperation</a></li>
        <li><a href="#reactiveinsertoperation-1">ReactiveInsertOperation</a></li>
        <li><a href="#reactiveinsertoperation-실행">ReactiveInsertOperation 실행</a></li>
        <li><a href="#reactiveupdateoperation">ReactiveUpdateOperation</a></li>
        <li><a href="#findandreplace">findAndReplace</a></li>
        <li><a href="#findandmodify">findAndModify</a></li>
        <li><a href="#update">update</a></li>
        <li><a href="#findandreplace-실행">findAndReplace 실행</a></li>
        <li><a href="#findandmodify-실행">findAndModify 실행</a></li>
        <li><a href="#update-실행">update 실행</a></li>
        <li><a href="#reactiveremoveoperation">ReactiveRemoveOperation</a></li>
        <li><a href="#reactiveaggregationoperation">ReactiveAggregationOperation</a></li>
        <li><a href="#reactivechangestreamoperation">ReactiveChangeStreamOperation</a></li>
        <li><a href="#reactivemongooperations-2">ReactiveMongoOperations</a></li>
      </ul>
    </li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown book-article"><h1 id="reactivemongooperations">
  ReactiveMongoOperations
  <a class="anchor" href="#reactivemongooperations">#</a>
</h1>
<h2 id="reactivemongooperations-1">
  ReactiveMongoOperations
  <a class="anchor" href="#reactivemongooperations-1">#</a>
</h2>
<ul>
<li>ReactiveFluentMongoOperations를 상속</li>
<li>ReactiveFluentMongoOperations는 여러 Operations를 상속
<ul>
<li>ReactiveFindOperation: find query와 관련된 메서드 제공</li>
<li>ReactiveInsertOperation: insert query와 관련된 메서드 제공</li>
<li>ReactiveUpdateOperation: update query와 관련된 메서드 제공</li>
<li>ReactiveRemoveOperation: delete query와 관련된 메서드 제공</li>
<li>ReactiveAggregationOperation: aggregation query와 관련된 메서드 제공</li>
<li>ReactiveChangeStreamOperation: watch query와 관련된 메서드 제공

  <img src="/image/mongodb/005/img.png" alt="img.png" /></li>
</ul>
</li>
</ul>
<h2 id="reactivefindoperation">
  ReactiveFindOperation
  <a class="anchor" href="#reactivefindoperation">#</a>
</h2>
<ul>
<li>ReactiveFindOperation의 query 부터 시작</li>
<li>TerminatingFind의 count, exists, first, one, all, tail 등으로 종료</li>
<li>query -&gt; inCollection -&gt; as -&gt; matching -&gt; 최종</li>
<li>query -&gt; inCollection -&gt; matching -&gt; 최종</li>
<li>query -&gt; as -&gt; matching -&gt; 최종</li>
<li>query -&gt; matching -&gt; 최종</li>
<li>query -&gt; 최종

  <img src="/image/mongodb/005/img_1.png" alt="img_1.png" /></li>
</ul>
<h2 id="reactivefindoperation-1">
  ReactiveFindOperation
  <a class="anchor" href="#reactivefindoperation-1">#</a>
</h2>
<ul>
<li>inCollection
<ul>
<li>query를 실행할 collection 이름을 전달</li>
<li>제공되지 않을 경우
<ul>
<li>domain Type의 class 이름 통해 collection 이름 획득</li>
<li>@Document 어노테이션 통해 collection 이름 획득</li>
</ul>
</li>
</ul>
</li>
<li>as
<ul>
<li>Entity를 전부 mapping하지 않고 특정 필드만 mapping 하고 싶은 경우
<ul>
<li>Entity의 일부 property만 담고 있는 subclass 또는 interface를 넘겨서 projection</li>
<li>projection이 제공되지 않는다면 Entity에 모든 필드를 mapping

  <img src="/image/mongodb/005/img_2.png" alt="img_2.png" /></li>
</ul>
</li>
</ul>
</li>
<li>matching
<ul>
<li>query의 filter에 해당
<ul>
<li>Query를 전달하여 filter에 들어갈 내용을 설정</li>
<li>matching을 생략하면 collection 전체에 대한 요청을 보내는 것과 동일</li>
</ul>
</li>
</ul>
</li>
<li>최종
<ul>
<li>마지막으로 count, exists, first, one, all, tail 등의 연산을 선택
<ul>
<li>count: 조건에 맞는 document의 개수 반환</li>
<li>exists: 조건에 맞는 document 존재 여부 반환</li>
<li>first: 조건에 맞는 첫 번째 document 반환</li>
<li>one: 조건에 맞는 하나의 document 반환. 하나가 넘으면 exception</li>
<li>all: 조건에 맞는 모든 document 반환</li>
<li>tail: cursor를 이용하여 조건에 해당하는 document를 지속적으로 수신

  <img src="/image/mongodb/005/img_3.png" alt="img_3.png" /></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="reactivefindoperation-실행">
  ReactiveFindOperation 실행
  <a class="anchor" href="#reactivefindoperation-%ec%8b%a4%ed%96%89">#</a>
</h2>
<ul>
<li>MongoClient를 이용하여 ReactiveMongoTemplate을 생성</li>
<li>Query와 Criteria를 이용해서 query 생성</li>
<li>PersonNameOnlyDocument class를 이용해서 id와 name만 projection

  <img src="/image/mongodb/005/img_4.png" alt="img_4.png" />

  <img src="/image/mongodb/005/img_5.png" alt="img_5.png" />

  <img src="/image/mongodb/005/img_6.png" alt="img_6.png" /></li>
</ul>
<h2 id="reactiveinsertoperation">
  ReactiveInsertOperation
  <a class="anchor" href="#reactiveinsertoperation">#</a>
</h2>
<ul>
<li>ReactiveInsertOperation의 insert 부터 시작하여 TerminatingInsert의 one, all로 종료
<ul>
<li>insert -&gt; into -&gt; (one, all)</li>
<li>insert -&gt; (one, all)

  <img src="/image/mongodb/005/img_7.png" alt="img_7.png" /></li>
</ul>
</li>
</ul>
<h2 id="reactiveinsertoperation-1">
  ReactiveInsertOperation
  <a class="anchor" href="#reactiveinsertoperation-1">#</a>
</h2>
<ul>
<li>one
<ul>
<li>insert query에 이용할 entity 하나를 전달
<ul>
<li>주어진 entity를 Document로 변환하고 insert</li>
<li>결과를 Mono로 반환</li>
</ul>
</li>
</ul>
</li>
<li>all
<ul>
<li>bulk insert 지원
<ul>
<li>주어진 entity Collection -&gt; Document Collection으로 변환하고 insert</li>
<li>결과를 flux로 반환

  <img src="/image/mongodb/005/img_8.png" alt="img_8.png" /></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="reactiveinsertoperation-실행">
  ReactiveInsertOperation 실행
  <a class="anchor" href="#reactiveinsertoperation-%ec%8b%a4%ed%96%89">#</a>
</h2>
<ul>
<li>inCollection을 통해서 insert할 collection 명시</li>
<li>entity를 생성하여 all에 전달

  <img src="/image/mongodb/005/img_9.png" alt="img_9.png" />

  <img src="/image/mongodb/005/img_10.png" alt="img_10.png" /></li>
</ul>
<h2 id="reactiveupdateoperation">
  ReactiveUpdateOperation
  <a class="anchor" href="#reactiveupdateoperation">#</a>
</h2>
<ul>
<li>ReactiveUpdateOperation의 update 부터 시작</li>
<li>update, findAndModify, findAndReplace 지원

  <img src="/image/mongodb/005/img_11.png" alt="img_11.png" /></li>
</ul>
<h2 id="findandreplace">
  findAndReplace
  <a class="anchor" href="#findandreplace">#</a>
</h2>
<ul>
<li>Document를 찾고 다른 Document로 대체</li>
<li>쿼리를 실행하고 그 결과를 Mono로 반환</li>
<li>replaceWith : 대상을 찾게되었을때 대체할 객체를 제공</li>
<li>withOptions : findAndReplace에 대한 옵션 제공
<ul>
<li>returnNew : true -&gt; 대체된 document를 반환, false(default) -&gt; 기존 document를 반환</li>
<li>upsert : true -&gt; 조건에 만족하는 document가 없는 경우 insert, false -&gt; 존재하는 경우에만</li>
</ul>
</li>
<li>as : 값을 대체한 후 그 결과를 전부 mapping하지 않고 특정 필드만 mapping 하고 싶은 경우

  <img src="/image/mongodb/005/img_12.png" alt="img_12.png" /></li>
</ul>
<h2 id="findandmodify">
  findAndModify
  <a class="anchor" href="#findandmodify">#</a>
</h2>
<ul>
<li>값을 찾아서 update 하고 그 결과를 Mono로 변환</li>
<li>withOptions : findAndModify에 대한 옵션 제공
<ul>
<li>returnNew : true -&gt; 대체된 document를 반환, false(default) -&gt; 기존 document를 반환</li>
<li>upsert : true -&gt; 조건에 만족하는 document가 없는 경우 insert, false -&gt; 존재하는 경우에만</li>
<li>remove : true -&gt; update 대신 delete 수행

  <img src="/image/mongodb/005/img_13.png" alt="img_13.png" /></li>
</ul>
</li>
</ul>
<h2 id="update">
  update
  <a class="anchor" href="#update">#</a>
</h2>
<ul>
<li>apply : update를 수행
<ul>
<li>insert와 다르게 Entity가 아닌 Update 객체 전달</li>
<li>Update 객체의 update, fromDocument 등을 통해서 생성</li>
<li>set, unset, setOrInsert, inc, push, pop, pull, rename, currentDate, multiply 등의 연산 지원\</li>
</ul>
</li>
<li>all : 조건을 만족하는 모든 document에 대해 update</li>
<li>first : 조건을 만족하는 첫 document에 대해서 update</li>
<li>upsert: 조건을 만족하는 document가 있다면 update하고 없다면 새로 생성

  <img src="/image/mongodb/005/img_14.png" alt="img_14.png" /></li>
</ul>
<h2 id="findandreplace-실행">
  findAndReplace 실행
  <a class="anchor" href="#findandreplace-%ec%8b%a4%ed%96%89">#</a>
</h2>
<ul>
<li>inCollection을 통해서 update할 collection 명시</li>
<li>matching으로 update 영향을 받는 document 제한</li>
<li>returnNew 옵션 제공

  <img src="/image/mongodb/005/img_15.png" alt="img_15.png" />

  <img src="/image/mongodb/005/img_16.png" alt="img_16.png" /></li>
</ul>
<h2 id="findandmodify-실행">
  findAndModify 실행
  <a class="anchor" href="#findandmodify-%ec%8b%a4%ed%96%89">#</a>
</h2>
<ul>
<li>inCollection을 통해서 update할 collection 명시</li>
<li>matching으로 update 영향을 받는 document 제한</li>
<li>Update 객체로 여러 필드 수정

  <img src="/image/mongodb/005/img_17.png" alt="img_17.png" />

  <img src="/image/mongodb/005/img_18.png" alt="img_18.png" /></li>
</ul>
<h2 id="update-실행">
  update 실행
  <a class="anchor" href="#update-%ec%8b%a4%ed%96%89">#</a>
</h2>
<ul>
<li>inCollection을 통해서 update할 collection 명시</li>
<li>조건을 만족하는 document가 없게 만듬</li>
<li>Update 객체로 여러 필드 수정</li>
<li>upsert로 새로 추가
<ul>
<li>upsert: 조건을 만족하는 document가 있다면 update하고 없다면 새로 생성

  <img src="/image/mongodb/005/img_19.png" alt="img_19.png" />

  <img src="/image/mongodb/005/img_20.png" alt="img_20.png" /></li>
</ul>
</li>
</ul>
<h2 id="reactiveremoveoperation">
  ReactiveRemoveOperation
  <a class="anchor" href="#reactiveremoveoperation">#</a>
</h2>
<ul>
<li>ReactiveRemoveOperation의 remove 부터 시작하여 TerminatingRemove의 all, findAndRemove으로 종료</li>
<li>remove -&gt; inCollection -&gt; matching -&gt; 실행</li>
<li>remove -&gt; inCollection -&gt; 실행</li>
<li>remove -&gt; matching -&gt; 실행</li>
<li>remove -&gt; 실행

  <img src="/image/mongodb/005/img_21.png" alt="img_21.png" /></li>
</ul>
<h2 id="reactiveaggregationoperation">
  ReactiveAggregationOperation
  <a class="anchor" href="#reactiveaggregationoperation">#</a>
</h2>
<ul>
<li>ReactiveAggregationOperation의 aggregateAndReturn 부터 시작하여 TerminatingAggregationOperation의 all로 종료</li>
<li>aggregateAndReturn -&gt; inCollection -&gt; by -&gt; all</li>
<li>aggregateAndReturn -&gt; by -&gt; all

  <img src="/image/mongodb/005/img_22.png" alt="img_22.png" /></li>
</ul>
<h2 id="reactivechangestreamoperation">
  ReactiveChangeStreamOperation
  <a class="anchor" href="#reactivechangestreamoperation">#</a>
</h2>
<ul>
<li>ReactiveChangeStreamOperation의 changeStream 부터 시작하여 TerminatingChangeStream의 listen로 종료</li>
<li>withOptions: changeStream과 관련된 옵션 제공</li>
<li>filter: stream을 listen하는 동안 filter할 대상</li>
<li>as: stream의 결과로 mapping할 Class 제공</li>
<li>resumeAt: 주어진 Token부터 listen 재개</li>
<li>resumeAfter: 주어진 Token 이후부터 listen 재개</li>
<li>startAfter: 주어진 Token부터 listen 새로 시작

  <img src="/image/mongodb/005/img_23.png" alt="img_23.png" /></li>
</ul>
<pre tabindex="0"><code class="language-ChatDocument" data-lang="ChatDocument">mongoTemplate.changeStream(ChatDocument.class)
        .listen()
        .doOnNext(item -&gt; {
            ChatDocument target = item.getBody();
            OperationType operationType = item.getOperationType();
    
            log.info(&#34;target: {}&#34;, target);
            log.info(&#34;type: {}&#34;, operationType);
    
            if (target != null &amp;&amp; operationType == OperationType.INSERT) {
                String from = target.getFrom();
                String to = target.getTo();
                String message = target.getMessage();
    
                doSend(from, to, message);
            }
        })
        .subscribe();
</code></pre><h2 id="reactivemongooperations-2">
  ReactiveMongoOperations
  <a class="anchor" href="#reactivemongooperations-2">#</a>
</h2>
<ul>
<li>ReactiveFluentMongoOperations에서 제공하는 조합 방식 대신</li>
<li>다양한 쿼리를 수행하는 단축 메소드 제공

  <img src="/image/mongodb/005/img_24.png" alt="img_24.png" /></li>
</ul>
<hr>




<div class="book-tabs"><input type="radio" class="toggle" name="tabs-References" id="tabs-References-0" checked="checked" />
  <label for="tabs-References-0">References</label>
  <div class="book-tabs-content markdown-inner"><ol>
<li>강의 : Spring Webflux 완전 정복 : 코루틴부터 리액티브 MSA 프로젝트까지_</li>
</ol>
</div></div>

</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">


  <div><a class="flex align-center" href="https://github.com/seohaebada/TIL/commit/7a7f7153db8ebb64d8fc33ce7022dc9cda31e834" title='Last modified by seohaebada | December 21, 2023' target="_blank" rel="noopener">
      <img src="/svg/calendar.svg" class="book-icon" alt="Calendar" />
      <span>December 21, 2023</span>
    </a>
  </div>



  <div>
    <a class="flex align-center" href="https://github.com/seohaebada/TIL/content/docs/content/docs/mongodb/005_mongoOperations.md" target="_blank" rel="noopener">
      <img src="/svg/edit.svg" class="book-icon" alt="Edit" />
      <span>Edit this page</span>
    </a>
  </div>


</div>



  <script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script>


 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#reactivemongooperations">ReactiveMongoOperations</a>
      <ul>
        <li><a href="#reactivemongooperations-1">ReactiveMongoOperations</a></li>
        <li><a href="#reactivefindoperation">ReactiveFindOperation</a></li>
        <li><a href="#reactivefindoperation-1">ReactiveFindOperation</a></li>
        <li><a href="#reactivefindoperation-실행">ReactiveFindOperation 실행</a></li>
        <li><a href="#reactiveinsertoperation">ReactiveInsertOperation</a></li>
        <li><a href="#reactiveinsertoperation-1">ReactiveInsertOperation</a></li>
        <li><a href="#reactiveinsertoperation-실행">ReactiveInsertOperation 실행</a></li>
        <li><a href="#reactiveupdateoperation">ReactiveUpdateOperation</a></li>
        <li><a href="#findandreplace">findAndReplace</a></li>
        <li><a href="#findandmodify">findAndModify</a></li>
        <li><a href="#update">update</a></li>
        <li><a href="#findandreplace-실행">findAndReplace 실행</a></li>
        <li><a href="#findandmodify-실행">findAndModify 실행</a></li>
        <li><a href="#update-실행">update 실행</a></li>
        <li><a href="#reactiveremoveoperation">ReactiveRemoveOperation</a></li>
        <li><a href="#reactiveaggregationoperation">ReactiveAggregationOperation</a></li>
        <li><a href="#reactivechangestreamoperation">ReactiveChangeStreamOperation</a></li>
        <li><a href="#reactivemongooperations-2">ReactiveMongoOperations</a></li>
      </ul>
    </li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












